<!DOCTYPE HTML>
<title>Backbone.Ext</title>
<script src="jquery.js"></script>
<script src="underscore.js"></script>
<script src="backbone.js"></script>
<script src="../backbone.ext.js"></script>
<h1>MultiRouter</h1>
<table cellspacing="4">
  <tr style="text-align: left">
    <th style="width: 160px">Router A</th>
    <th style="width: 160px">Router B</th>
    <th style="width: 160px">Router C</th>
  </tr>
  <tr>
    <td id="a1">a/b/c</td>
    <td id="b1">a/b</td>
    <td id="c1">a/c</td>
  </tr>
  <tr>
    <td id="a2">a/*splat</td>
    <td id="b2">:param/b/*splat</td>
    <td id="c2">:param/:param/c</td>
  </tr>
</table>
<br>
<a href="#a/b/c">a/b/c</a><br>
<a href="#a/b">a/b</a><br>
<a href="#a/c">a/c</a><br>
<a href="#b/c">b/c</a> (no matches)<br>
<a href="#a/d/e">a/d/e</a><br>
<a href="#d/b/c">d/b/c</a><br>
<script>

// Each of these three routers has a very specific route, and a generic route.
// Specific routes can override generic routes within a router like you would
// expect. But by using MultiRouter to glue them together, multiple routers
// can match on the same or similar routes.

var RouterA = Backbone.Router.extend({
  routes: {
    'a/b/c'    : 'a1',
    'a/*splat' : 'a2'
  },

  a1: function () {
    $('#a1').css('background', 'yellow');
  },

  a2: function () {
    $('#a2').css('background', 'yellow');
  }
});

var RouterB = Backbone.Router.extend({
  routes: {
    'a/b'             : 'b1',
    ':param/b/*splat' : 'b2'
  },

  b1: function () {
    $('#b1').css('background', 'yellow');
  },

  b2: function () {
    $('#b2').css('background', 'yellow');
  }
});

var RouterC = Backbone.Router.extend({
  routes: {
    'a/c'             : 'c1',
    ':param/:param/c' : 'c2'
  },

  c1: function () {
    $('#c1').css('background', 'yellow');
  },

  c2: function () {
    $('#c2').css('background', 'yellow');
  }
});

var MultiRouter = Backbone.Ext.MultiRouter.extend({
  initialize: function () {
    this.a = this.createRouter(RouterA);
    this.b = this.createRouter(RouterB);
    this.c = this.createRouter(RouterC);
  },

  // These route handlers will always get called first.
  routes: {
    '*_': 'reset'
  },

  reset: function () {
    $('#a1, #a2, #b1, #b2, #c1, #c2').css('background', 'transparent');
  }
});

var router = new MultiRouter();
Backbone.history.start();
</script>
